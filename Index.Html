<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINDSPACE | Dual Interface</title>
    <style>
        /* --- CSS STYLING --- */
        body { margin: 0; overflow: hidden; background-color: #050510; font-family: 'Segoe UI', sans-serif; color: white; }
        
        #universe-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }

        /* UI Container */
        #ui-layer {
            position: relative; z-index: 10; height: 100vh;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            pointer-events: none; /* Let clicks pass to 3D */
        }

        /* Logo */
        .logo {
            position: absolute; top: 30px; left: 40px;
            font-size: 1.2rem; letter-spacing: 0.1em; font-weight: 600;
            display: flex; align-items: center; gap: 10px;
        }
        .logo span { opacity: 0.7; }

        /* The Input Bar (Gemini Style) */
        .input-container {
            pointer-events: auto;
            width: 50%; min-width: 300px;
            position: relative;
        }
        
        input {
            width: 100%; padding: 18px 25px;
            background: rgba(20, 20, 35, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: white; font-size: 1.1rem;
            backdrop-filter: blur(12px);
            transition: 0.3s;
            outline: none;
            box-shadow: 0 4px 30px rgba(0,0,0,0.3);
        }
        input:focus { border-color: rgba(255, 255, 255, 0.5); background: rgba(30, 30, 50, 0.8); }

        /* THE CARDS (Hidden by default) */
        .info-card {
            position: absolute; bottom: 100px;
            width: 300px; padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            opacity: 0; transform: translateY(20px);
            transition: all 0.8s ease;
            pointer-events: auto;
        }

        /* Emotional Card Style (Left) */
        #emotional-card {
            left: 10%;
            background: linear-gradient(135deg, rgba(20,30,80,0.6), rgba(0,0,0,0.8));
            border-left: 3px solid #4488ff;
        }

        /* Intellectual Card Style (Right) */
        #intellectual-card {
            right: 10%;
            background: linear-gradient(135deg, rgba(60,40,10,0.6), rgba(0,0,0,0.8));
            border-right: 3px solid #ffaa00;
        }

        h3 { margin: 0 0 10px 0; font-size: 1rem; text-transform: uppercase; letter-spacing: 2px; }
        p { font-size: 0.9rem; line-height: 1.5; opacity: 0.8; margin: 0; }

        /* Smooth transition for background */
        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, transparent 0%, #000 120%);
            z-index: 1; pointer-events: none;
        }

    </style>
</head>
<body>

    <div class="bg-overlay"></div>
    <canvas id="universe-canvas"></canvas>

    <div id="ui-layer">
        <div class="logo">ðŸ§  <span>MINDSPACE</span></div>

        <div class="input-container">
            <input type="text" id="mind-input" placeholder="How are you feeling, or what do you wish to learn?" autocomplete="off">
        </div>

        <div id="emotional-card" class="info-card">
            <h3 style="color: #4488ff;">Comeback Portal</h3>
            <p id="emo-text">Connecting to the stars... Someone else felt this way yesterday and found hope.</p>
        </div>

        <div id="intellectual-card" class="info-card">
            <h3 style="color: #ffaa00;">Perspective Box</h3>
            <p id="int-text">Retrieving wisdom... History suggests that this architectural marvel was built on love.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- 1. SETUP SCENE ---
        const canvas = document.getElementById('universe-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 30;

        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        // Groups to hold our two different worlds
        const constellationGroup = new THREE.Group();
        const archiveGroup = new THREE.Group();
        
        scene.add(constellationGroup);
        scene.add(archiveGroup);

        // --- 2. CREATE EMOTIONAL WORLD (Constellations) ---
        // We create particles and lines connecting them
        const starCount = 150;
        const starGeo = new THREE.BufferGeometry();
        const starPos = [];
        
        // Create stars
        for(let i=0; i<starCount; i++) {
            let x = (Math.random() - 0.5) * 60;
            let y = (Math.random() - 0.5) * 40;
            let z = (Math.random() - 0.5) * 40;
            starPos.push(x, y, z);
        }
        starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
        const starMat = new THREE.PointsMaterial({ color: 0x4488ff, size: 0.5 });
        const stars = new THREE.Points(starGeo, starMat);
        constellationGroup.add(stars);

        // Create Lines (Connect stars to form constellations)
        const lineMat = new THREE.LineBasicMaterial({ color: 0x4488ff, transparent: true, opacity: 0.3 });
        // We will update lines in animation loop to make them twinkle/move

        // Add some background fog for depth
        const emotionalFog = new THREE.FogExp2(0x020210, 0.03);
        const intellectualFog = new THREE.FogExp2(0x1a1500, 0.02);

        // --- 3. CREATE INTELLECTUAL WORLD (Floating Scrolls) ---
        // Create simple plane geometries to look like paper
        const scrollGeo = new THREE.PlaneGeometry(3, 4);
        const scrollMat = new THREE.MeshBasicMaterial({ 
            color: 0xeebb88, // Parchment color
            side: THREE.DoubleSide,
            transparent: true, 
            opacity: 0.8
        });

        for(let i=0; i<15; i++) {
            const scroll = new THREE.Mesh(scrollGeo, scrollMat);
            scroll.position.set(
                (Math.random() - 0.5) * 50,
                (Math.random() - 0.5) * 30,
                (Math.random() - 0.5) * 20
            );
            scroll.rotation.set(Math.random(), Math.random(), Math.random());
            // Add a random speed property to each scroll
            scroll.userData = { 
                rotSpeed: (Math.random() * 0.02), 
                floatSpeed: (Math.random() * 0.01) 
            };
            archiveGroup.add(scroll);
        }
        
        // Hide intellectual world initially
        archiveGroup.visible = false;
        constellationGroup.visible = true;

        // --- 4. ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);

            // Rotate Constellations
            if(constellationGroup.visible) {
                constellationGroup.rotation.y += 0.001;
                constellationGroup.rotation.z += 0.0005;
            }

            // Animate Scrolls
            if(archiveGroup.visible) {
                archiveGroup.children.forEach(scroll => {
                    scroll.rotation.x += scroll.userData.rotSpeed;
                    scroll.rotation.y += scroll.userData.rotSpeed;
                    scroll.position.y += Math.sin(Date.now() * 0.001) * 0.01; // Gentle bobbing
                });
            }

            renderer.render(scene, camera);
        }
        animate();

        // --- 5. INTERACTION LOGIC ---
        const input = document.getElementById('mind-input');
        const emoCard = document.getElementById('emotional-card');
        const intCard = document.getElementById('intellectual-card');

        // Keywords
        const emoWords = ['sad', 'lonely', 'stress', 'overwhelm', 'feel', 'love', 'hate', 'cry'];
        const intWords = ['history', 'taj mahal', 'science', 'fact', 'learn', 'study', 'why', 'how'];

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const val = input.value.toLowerCase();
                let isEmotional = emoWords.some(w => val.includes(w));
                let isIntellectual = intWords.some(w => val.includes(w));

                if (isEmotional) {
                    // SWITCH TO EMOTIONAL MODE
                    constellationGroup.visible = true;
                    archiveGroup.visible = false;
                    scene.fog = emotionalFog;
                    renderer.setClearColor(0x050510);
                    
                    // UI Animation
                    emoCard.style.opacity = 1;
                    emoCard.style.transform = "translateY(0)";
                    intCard.style.opacity = 0;
                    
                    // Update Text
                    document.getElementById('emo-text').innerText = "Analyzing sentiment... Your thought '" + input.value + "' has been added to the constellation.";
                } 
                else if (isIntellectual) {
                    // SWITCH TO INTELLECTUAL MODE
                    constellationGroup.visible = false;
                    archiveGroup.visible = true;
                    scene.fog = intellectualFog;
                    renderer.setClearColor(0x1a1005); // Dark brownish/sepia bg

                    // UI Animation
                    intCard.style.opacity = 1;
                    intCard.style.transform = "translateY(0)";
                    emoCard.style.opacity = 0;

                    // Update Text
                    document.getElementById('int-text').innerText = "Opening Archive... Retrieving knowledge regarding: " + input.value;
                }
                
                input.value = ""; // Clear input
            }
        });

        // Resize Handler
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
